use std::path::Path;
mod spectrum_analyzer;
use crate::spectrum_analyzer::*;

fn main() {
    let path = Path::new("D:/Documents/prog/rust/mp3Player/audio-project/audio-analyzer/assets");
    let music_name_stereo = "Anthrazit.wav";
    let music_name_mono = "Belfast_Child_mono.mp3";
    // TODO open this in dedicated thread
    if let Some((samples_formatted, beats_formatted)) =
        analyze_samples(path, music_name_stereo, &(DATA.to_vec()))
    {
        draw_into_png(
            path,
            music_name_stereo,
            &samples_formatted,
            &beats_formatted,
        )
        .unwrap();
        draw_into_window(
            path,
            music_name_stereo,
            &samples_formatted,
            &beats_formatted,
        )
        .unwrap();
    }
    std::process::exit(0)
}

const DATA: [f64; 833] = [
    1.779116, 2.229682, 2.680272, 3.050453, 3.432245, 3.814036, 4.195827, 4.696281, 5.208322,
    5.720386, 6.073787, 6.438798, 6.803810, 7.168821, 7.619388, 8.081565, 8.543741, 9.017846,
    9.503583, 9.989320, 10.466440, 10.955193, 11.443946, 11.912177, 12.392018, 12.871860,
    13.351701, 13.819456, 14.298843, 14.778232, 15.247052, 15.727506, 16.207937, 16.588844,
    17.067369, 17.545897, 18.010929, 18.487597, 18.964241, 19.429411, 19.906168, 20.382948,
    21.194353, 21.670725, 22.147097, 22.614126, 23.092766, 23.571383, 24.037506, 24.515215,
    24.992949, 25.458570, 25.935827, 26.413061, 26.878798, 27.356123, 27.833447, 28.298277,
    28.774717, 29.251156, 29.719025, 30.198481, 30.677959, 31.157438, 31.624376, 32.102924,
    32.581474, 33.047756, 33.525646, 34.003513, 34.510929, 34.983448, 35.455986, 35.960545,
    36.439659, 36.918797, 37.411472, 37.889137, 38.366802, 38.864059, 39.223061, 39.582062,
    39.941067, 40.312653, 40.669456, 41.026260, 41.383060, 41.748119, 42.103695, 42.459297,
    42.814899, 43.213108, 43.569252, 43.925373, 44.281521, 44.914467, 45.392040, 45.869614,
    46.357121, 46.834148, 47.311157, 47.700771, 48.177799, 48.654831, 49.271858, 49.630611,
    49.989365, 50.348118, 50.728298, 51.085487, 51.442699, 51.799885, 52.172470, 52.529591,
    52.886734, 53.243877, 53.621090, 53.977959, 54.334808, 54.691677, 55.077209, 55.434307,
    55.791405, 56.148502, 56.522358, 56.878979, 57.235600, 57.592201, 57.974285, 58.330906,
    58.687550, 59.044193, 59.400841, 59.777302, 60.134762, 60.492199, 60.849659, 61.241020,
    61.598618, 61.956234, 62.313831, 62.689117, 63.046577, 63.404060, 63.761543, 64.032585,
    64.389549, 64.746506, 65.103470, 65.478844, 65.835808, 66.192787, 66.549751, 66.917892,
    67.275146, 67.632401, 67.989685, 68.346939, 68.739731, 69.218300, 69.696846, 70.185829,
    70.662926, 71.139999, 71.642883, 72.119843, 72.596779, 73.093468, 73.570435, 74.047417,
    74.535172, 75.011726, 75.488297, 75.991608, 76.468323, 76.945030, 77.436668, 77.913330,
    78.389999, 78.897934, 79.374512, 79.851089, 80.345558, 80.822403, 81.299255, 81.796463,
    82.273201, 82.749908, 83.252991, 83.729889, 84.206757, 84.683647, 85.159912, 85.636642,
    86.113380, 86.414558, 86.891182, 87.367821, 87.837616, 88.314125, 88.790657, 89.301720,
    89.778572, 90.255417, 90.756302, 91.233513, 91.710724, 92.207916, 92.684875, 93.161858,
    93.659096, 94.135193, 94.611313, 95.087418, 95.477509, 95.953949, 96.430367, 96.810768,
    97.287552, 97.764305, 98.243217, 98.719841, 99.196465, 99.698776, 100.175758, 100.652718,
    101.145874, 101.622337, 102.098801, 102.608162, 103.084991, 103.561836, 104.047958, 104.524147,
    105.000343, 105.476532, 105.964737, 106.441223, 106.917709, 107.439003, 107.915962, 108.392944,
    108.888550, 109.365105, 109.841652, 110.345329, 110.822311, 111.299294, 111.797867, 112.274765,
    112.751678, 113.244423, 113.721382, 114.198341, 114.700745, 115.177528, 115.654312, 116.147095,
    116.623695, 117.100319, 117.587616, 118.064056, 118.540520, 119.048096, 119.524628, 120.001183,
    120.501114, 120.977440, 121.453789, 121.952858, 122.429955, 122.907051, 123.405922, 123.882652,
    124.359390, 124.854446, 125.330910, 125.807373, 126.283829, 126.770363, 127.247414, 127.724442,
    128.244293, 128.721207, 129.198135, 129.699158, 130.176239, 130.653305, 131.148621, 131.625168,
    132.101730, 132.594986, 133.071106, 133.547256, 134.049911, 134.526352, 135.002808, 135.500778,
    135.976959, 136.453125, 136.948410, 137.425262, 137.902115, 138.408432, 138.885574, 139.362717,
    139.854599, 140.331116, 140.807617, 141.314621, 141.791412, 142.268188, 142.764648, 143.241150,
    143.717682, 144.208847, 144.685654, 145.162445, 145.669205, 146.145844, 146.622513, 147.099167,
    147.575378, 148.052338, 148.529282, 149.054291, 149.531067, 150.007843, 150.506302, 150.982971,
    151.459641, 151.950455, 152.426849, 152.903244, 153.412018, 153.888824, 154.365601, 154.854950,
    155.331467, 155.808029, 156.316422, 156.793335, 157.270233, 157.765854, 158.242538, 158.719223,
    159.209259, 159.686142, 160.163040, 160.656418, 161.133270, 161.610092, 162.115875, 162.592972,
    163.070038, 163.568207, 164.044281, 164.520340, 165.026505, 165.503326, 165.980133, 166.466797,
    166.943832, 167.420837, 167.897873, 168.363556, 168.840866, 169.318161, 169.858871, 170.336395,
    170.813919, 171.309433, 171.781357, 172.253311, 172.764008, 173.239685, 173.715332, 174.220795,
    174.699066, 175.177353, 175.667648, 176.144333, 176.621048, 177.121231, 177.598190, 178.075165,
    178.564941, 179.041290, 179.517639, 180.027481, 180.504913, 180.982361, 181.462402, 181.938568,
    182.414719, 182.917114, 183.394348, 183.871613, 184.382019, 184.859314, 185.336624, 185.820496,
    186.297867, 186.775238, 187.263062, 187.739777, 188.216507, 188.693222, 189.169586, 189.646210,
    190.122833, 190.660812, 191.137863, 191.614914, 192.124176, 192.602600, 193.081039, 193.570251,
    194.047073, 194.523880, 195.012787, 195.489563, 195.966370, 196.465897, 196.942245, 197.418594,
    197.925583, 198.402252, 198.878891, 199.370071, 199.847366, 200.324677, 200.822266, 201.299210,
    201.776169, 202.275803, 202.752518, 203.229248, 203.742218, 204.219162, 204.696106, 205.188889,
    205.665924, 206.142975, 206.631790, 207.109207, 207.586594, 208.086258, 208.563080, 209.039932,
    209.516754, 209.903290, 210.379791, 210.856323, 211.349380, 211.826416, 212.303452, 212.813675,
    213.290344, 213.766983, 214.265808, 214.742737, 215.219666, 215.723404, 216.200638, 216.677872,
    217.151581, 217.628723, 218.105896, 218.619949, 219.097229, 219.574509, 220.076401, 220.553177,
    221.029953, 221.525146, 222.002045, 222.478958, 222.964462, 223.441376, 223.918304, 224.426071,
    224.902695, 225.379349, 225.855988, 226.240814, 226.717590, 227.194397, 227.685349, 228.162064,
    228.638794, 229.143158, 229.619766, 230.096390, 230.589325, 231.066345, 231.543350, 232.050705,
    232.527191, 233.003647, 233.493927, 233.970856, 234.447800, 234.943512, 235.420227, 235.896942,
    236.375168, 236.851929, 237.328690, 237.850433, 238.327438, 238.804443, 239.302261, 239.778519,
    240.254807, 240.731064, 241.469879, 241.945755, 242.407059, 242.883652, 243.360275, 243.896484,
    244.378021, 244.859543, 245.342102, 245.819565, 246.297028, 246.799622, 247.277100, 247.754608,
    248.246216, 248.722748, 249.199295, 249.706375, 250.183380, 250.660385, 251.149902, 251.626373,
    252.102829, 252.579315, 253.086731, 253.563583, 254.040436, 254.545624, 255.022675, 255.499725,
    255.989975, 256.466797, 256.943604, 257.440552, 257.917633, 258.394684, 258.898560, 259.375366,
    259.852142, 260.343658, 260.820648, 261.297577, 261.800323, 262.277283, 262.754242, 263.246704,
    263.723267, 264.199829, 264.696716, 265.173187, 265.649719, 266.148315, 266.624969, 267.101624,
    267.601868, 268.078766, 268.555664, 269.050934, 269.528320, 270.005707, 270.502686, 270.979431,
    271.456177, 271.932953, 272.332947, 272.809357, 273.285797, 273.665985, 274.142822, 274.619690,
    275.113922, 275.590485, 276.067047, 276.552826, 277.029816, 277.506836, 278.003723, 278.480011,
    278.956299, 279.466461, 279.943573, 280.420715, 280.912445, 281.389282, 281.866180, 282.343048,
    283.099487, 283.576630, 284.052002, 284.528992, 285.006012, 285.509583, 285.986847, 286.464142,
    286.953522, 287.429810, 287.906128, 288.414734, 288.892120, 289.369507, 289.856598, 290.333008,
    290.809387, 291.310059, 291.786896, 292.263733, 292.740570, 293.496735, 293.973480, 294.463593,
    294.940979, 295.418335, 295.916046, 296.393311, 296.870575, 297.363983, 297.840485, 298.317017,
    298.820618, 299.297302, 299.773987, 300.271576, 300.748291, 301.224976, 301.719452, 302.196075,
    302.672699, 303.170410, 303.647003, 304.123596, 304.600189, 305.098969, 305.575317, 306.051697,
    306.552795, 307.029510, 307.506226, 307.999237, 308.476440, 308.953644, 309.702911, 310.179352,
    310.667847, 311.143921, 311.619965, 312.124298, 312.600647, 313.076996, 313.579254, 314.055939,
    314.532623, 315.009308, 315.501495, 315.977844, 316.454224, 316.960144, 317.436920, 317.913696,
    318.411438, 318.887360, 319.363281, 319.856445, 320.332825, 320.809174, 321.319336, 321.796112,
    322.272888, 322.761780, 323.238403, 323.715057, 324.223053, 324.699890, 325.176727, 325.668243,
    326.144318, 326.620422, 327.122711, 327.599640, 328.076569, 328.576294, 329.053375, 329.530457,
    330.024719, 330.501465, 330.978210, 331.477203, 331.953979, 332.430695, 332.930542, 333.406952,
    333.883301, 334.378235, 334.854614, 335.331055, 335.807465, 336.306915, 336.783630, 337.260315,
    337.765686, 338.241974, 338.718262, 339.217316, 339.694061, 340.170807, 340.673065, 341.150055,
    341.627045, 342.117249, 342.593872, 343.070526, 343.575226, 344.052124, 344.528961, 345.022705,
    345.498993, 345.975281, 346.475250, 346.952423, 347.429626, 347.930298, 348.407379, 348.884521,
    349.372955, 349.848633, 350.324341, 350.829712, 351.305725, 351.781738, 352.280060, 352.756409,
    353.232727, 353.727112, 354.203949, 354.680786, 355.157654, 355.899353, 356.375763, 356.884064,
    357.360107, 357.836182, 358.321350, 358.798981, 359.276611, 359.775757, 360.252533, 360.729309,
    361.205688, 361.682709, 362.159760, 362.624908, 363.101654, 363.578400, 364.055176, 364.512238,
    364.980957, 365.449646, 365.907837, 366.377655, 366.847473, 367.302979, 367.770111, 368.237244,
    368.692566, 369.159485, 369.626404, 370.081238, 370.547699, 371.014160, 371.480621, 371.935516,
    372.402008, 372.868561, 373.323975, 373.790985, 374.258057, 374.714203, 375.182007, 375.649811,
    376.106171, 376.574158, 377.042145, 377.498352, 377.966125, 378.433899, 378.901672, 379.358276,
    379.826477, 380.294647, 380.750122, 381.217224, 381.684265, 382.139404, 382.606110, 383.072845,
    383.526703, 383.992188, 384.457672, 384.912476, 385.378784, 385.845123, 386.311462, 386.766083,
    387.232391, 387.698608, 388.153473, 388.619965, 389.086487, 389.541046, 390.007263, 390.473480,
    390.927979, 391.394135, 391.860321, 392.315063, 392.781403, 393.247803, 393.714142,
];

const DATA_BELLFAST: [f64; 406] = [
    2.067347, 2.771927, 3.355692, 3.962630, 4.815374, 5.691338, 6.554830, 7.467619, 8.403628,
    9.293424, 10.206440, 11.055828, 11.901270, 12.769932, 13.618685, 14.490658, 15.334694,
    16.201904, 17.039139, 17.871338, 18.726757, 19.566803, 20.430023, 21.269161, 22.131519,
    22.777187, 23.645895, 24.285488, 25.199320, 26.092426, 26.988617, 27.908073, 28.735601,
    29.586349, 30.420635, 31.392563, 32.241451, 32.851700, 33.694466, 34.458912, 35.303989,
    36.182495, 37.017460, 37.814285, 38.700500, 39.520908, 40.309978, 41.122314, 41.834919,
    42.695690, 43.543266, 44.414059, 45.043808, 45.934422, 46.796734, 47.753605, 48.640678,
    49.693470, 51.339684, 52.499729, 53.323494, 54.157051, 55.783718, 57.110477, 58.207756,
    59.004673, 59.782360, 60.583309, 61.198910, 61.979229, 62.696190, 63.436417, 64.587166,
    65.319000, 65.783630, 66.516327, 67.491516, 68.237411, 68.963585, 69.713013, 70.775009,
    71.830292, 73.045853, 74.075462, 74.846619, 75.844894, 76.866394, 77.981544, 79.516373,
    80.557281, 81.621407, 82.666664, 83.563492, 84.544624, 85.572792, 86.584808, 87.620049,
    88.631248, 89.860954, 90.880272, 91.922813, 92.945351, 94.168343, 95.654831, 96.740227,
    97.712021, 98.671066, 99.644035, 100.682816, 102.330750, 103.965218, 104.977234, 106.182945,
    107.055099, 108.074692, 109.200951, 110.239952, 111.271790, 112.125534, 113.230797, 114.255150,
    115.496689, 116.514107, 118.020950, 119.063538, 120.095558, 121.102539, 122.039589, 123.084671,
    124.580452, 125.588165, 126.696869, 127.718277, 128.653702, 129.619370, 130.608261, 131.566757,
    132.760132, 133.772156, 134.776962, 136.285889, 137.678055, 138.858871, 140.013153, 141.090973,
    142.160141, 143.651520, 144.668839, 145.684860, 146.724030, 147.734100, 148.745850, 149.780869,
    150.688431, 151.701767, 152.738327, 153.759186, 154.795959, 155.855911, 157.481674, 158.488800,
    159.500641, 160.704224, 161.744949, 162.858505, 163.726440, 164.807388, 165.943314, 166.700867,
    167.785263, 168.553467, 169.275009, 170.008972, 170.718597, 171.497375, 172.206573, 172.937683,
    173.645844, 174.319595, 175.028122, 175.773468, 176.484222, 177.298553, 178.005127, 178.862488,
    179.570709, 180.254425, 180.959091, 181.858917, 182.567657, 183.343491, 184.050888, 184.818863,
    185.527573, 186.308838, 187.013153, 187.694519, 188.399139, 189.138092, 189.842987, 190.704391,
    191.411514, 192.096283, 192.800583, 193.546082, 194.250290, 195.062271, 195.764847, 196.653427,
    197.358780, 198.166168, 198.869339, 199.588577, 200.290741, 201.119553, 201.819687, 202.497421,
    203.198410, 204.096695, 204.799911, 205.534241, 206.241821, 206.912247, 207.616058, 208.528519,
    209.245529, 210.015823, 210.720993, 211.449432, 212.156052, 212.993881, 213.700317, 214.417694,
    215.123535, 215.941727, 216.646988, 217.329391, 218.034973, 218.891617, 219.598099, 220.277649,
    220.980362, 221.659683, 222.362228, 223.042679, 223.746353, 224.424393, 225.125671, 225.826935,
    226.502945, 227.202179, 227.880722, 228.582489, 229.259949, 229.960678, 231.066116, 231.822998,
    232.874237, 233.875061, 234.904541, 235.957275, 237.008896, 237.776779, 238.837692, 239.983490,
    241.120361, 242.184631, 244.734375, 245.907761, 247.679276, 248.848160, 250.386932, 251.829117,
    253.661041, 254.787521, 255.825760, 256.887207, 257.749329, 259.255768, 260.343628, 261.405548,
    262.566772, 263.661316, 265.184357, 266.276703, 267.345581, 268.499054, 269.607178, 271.127258,
    272.210419, 273.276459, 274.432434, 275.533478, 277.052277, 278.006165, 279.077820, 280.361908,
    281.462891, 282.494843, 283.550018, 284.432892, 285.471344, 286.533020, 287.376160, 288.407074,
    289.461273, 290.324005, 291.832550, 293.323029, 294.808380, 295.741180, 296.807343, 297.757019,
    298.868347, 299.936157, 301.097961, 301.825806, 302.895142, 304.041046, 305.075195, 306.629028,
    307.601715, 308.661865, 309.597900, 311.062317, 312.520172, 313.509827, 314.948669, 316.463898,
    317.931122, 318.825256, 319.965973, 321.274597, 322.335297, 323.371368, 324.405457, 325.432709,
    326.483185, 327.506073, 328.512390, 329.541870, 330.540405, 331.854462, 333.282166, 334.321686,
    335.353302, 336.612213, 337.943542, 338.969299, 340.018311, 341.227753, 342.548218, 343.584229,
    344.643433, 345.495880, 346.885498, 347.918549, 348.974884, 349.992340, 350.783844, 351.816650,
    352.839874, 354.278503, 355.585999, 356.591827, 357.503632, 358.458130, 359.479553, 360.239410,
    361.252441, 362.288696, 363.363129, 364.251282, 365.307434, 366.294159, 367.872742, 369.265411,
    370.222443, 371.202728, 372.832733, 373.837585, 374.894928, 376.977722, 377.987427, 379.002869,
    380.041443, 381.051422, 382.164032, 383.186584, 384.180237, 385.123444, 386.009979, 386.831665,
    387.676514, 388.501953, 390.143097, 390.960815, 391.801758, 392.616455, 393.454376, 394.271851,
    395.112549, 395.928528, 397.583313, 398.391205, 399.222321,
];
